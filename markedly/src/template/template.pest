template = ${ soi ~ component* ~ eoi }

// Components
component = { indentation ~ identifier ~ spacing* ~ (attributes)? ~ (spacing* ~ newline)+ }
indentation = { spacing* }

// Attributes
attributes = !{ "{" ~ (key_value ~ ("," ~ key_value)* ~ ","?)? ~ "}" }
key_value = { identifier ~ ":" ~ value }
value = { string | percentage | float | integer | tuple | null }

// Identifiers
identifier_char = _{ 'a'..'z' | 'A'..'Z' | '0'..'9' | "_" | "-" }
identifier = { identifier_char+ }

// Values
tuple = { "(" ~ value ~ ("," ~ value)* ~ ")" }

string = @{ "\"" ~ (escape | !("\"" | "\\") ~ any)* ~ "\"" }
escape = @{ "\\" ~ ("\"" | "\\" ) }

integer = @{ "-"? ~ number }
float = @{ "-"? ~ number ~ "." ~ ('0'..'9'+)? }
percentage = @{ "-"? ~ number ~ "%" }
number = { "0" | ('1'..'9' ~ '0'..'9'*) }

null = @{ "null" }

// Whitespace
spacing = _{ " " | "\t" }
newline = { "\r" | "\n" }
whitespace = _{ spacing | newline }
